
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pet World Augmented Reality </title>
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.3.0/pure-min.css">
  <link rel="stylesheet" href="http://purecss.io/combo/1.6.3?/css/layouts/blog.css">
  <link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
  <script src='http://code.jquery.com/jquery.min.js' type='text/javascript'></script>
  <script type='text/javascript' src='https://cdn.firebase.com/v0/firebase.js'></script>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>  
  <script>
      $(document).ready(function () { initialize();  });
      function initialize() {
        var centerMap = new google.maps.LatLng(37.4168811,-122.045);

        var mapOptions = {
            zoom: 13,
            center: centerMap,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          }
        var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
        var sites = [];
        var siteCounter = 0;

        //Firebase API Calls

        var messageListRef = new Firebase('https://yhackday.firebaseio.com');
        messageListRef.once('value', function(allMessagesSnapshot) {
          allMessagesSnapshot.forEach(function(messageSnapshot) {
            // Will be called with a messageSnapshot for each message under message_list.
            var latitude = messageSnapshot.child('latitude').val();
            var longitude = messageSnapshot.child('longitude').val();
            var webMarkerImage = messageSnapshot.child('sourceweb').val();
            var siteLatLng = new google.maps.LatLng(latitude, longitude);
            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                //title: "siteCounter",
                //zIndex: siteCounter,
                html: "latitude: " + latitude + " longitude: " + longitude,
                icon: webMarkerImage,
            });

            var contentString = "Some content";

            google.maps.event.addListener(marker, "click", function () {
                alert(this.html);
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });


          });
        });
        infowindow = new google.maps.InfoWindow({
                content: "loading..."
        });
    }
  </script>
</head>

<body>
<div class="pure-g-r" id="layout">
    <div class="sidebar pure-u">
        <header class="header">
            <hgroup>
                <h1 class="brand-title">Pet World</h1>
                <h2 class="brand-tagline">An AR World for Objects</h2>
            </hgroup>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="http://purecss.io">Pure</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="http://yuilibrary.com">YUI Library</a>
                    </li>
                </ul>
            </nav>
        </header>
    </div>

    <div class="pure-u-1">
            <header class="post-header">
                        <h2 class="post-title">Pet World Augemneted Reality</h2>
                        <p class="post-meta">
                            By Sreejumon, Pooran, Vasu 
                        </p><br/>
                    </header>

            <!--Maps code -->
            <div id="map-canvas" style="position: relative; background-color: rgb(229, 227, 223); overflow: hidden; -webkit-transform: translateZ(0);width: 100%;height: 600px;"></div>
            <!--Maps code end-->

            <footer class="footer">
                <div class="pure-menu pure-menu-horizontal pure-menu-open">
                    <ul>
                        <li><a href="http://purecss.io/">About</a></li>
                        <li><a href="https://yhackday.firebaseio.com/">Firebase</a></li>
                        <li><a href="https://github.com/yhackday">Github</a></li>
                    </ul>
                </div>
            </footer>
        </div>
    </div>
</div>

<script src="http://yui.yahooapis.com/3.12.0/build/yui/yui-min.js"></script>
<script>
YUI().use('node-base', 'node-event-delegate', function (Y) {
    // This just makes sure that the href="#" attached to the <a> elements
    // don't scroll you back up the page.
    Y.one('body').delegate('click', function (e) {
        e.preventDefault();
    }, 'a[href="#"]');
});
</script>

</body>
</html>
